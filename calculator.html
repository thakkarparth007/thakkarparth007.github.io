<!DOCTYPE html>
<html>
<head>
	<title>Calculator (Spider Inductions) | Parth Thakkar</title>
	<link rel="stylesheet" type="text/css" href="./css/calculator.css">
</head>
<body>
	<div id="calculator">
		<div id="expression_container" class="row2">
			<input id="expression" type="text" class="col-8-8" placeholder="Enter an expression..."/>
		</div>
		
		<div id="result_container" class="row">
			<span id="result" class="col-8-8">0</span>
		</div>

		<div id="button_container">
			<div class="row">
				<button id="btn_num7" class="col-1-8">7</button>
				<button id="btn_num8" class="col-1-8">8</button>
				<button id="btn_num9" class="col-1-8">9</button>
				<button id="btn_div" class="col-1-8">&divide;</button>
				<button id="btn_sin" class="col-1-8">sin</button>
				<button id="btn_cos" class="col-1-8">cos</button>
				<button id="btn_tan" class="col-1-8">tan</button>
				<button id="btn_del" class="col-1-8">DEL</button>
			</div>
			<div class="row">
				<button id="btn_num4" class="col-1-8">4</button>
				<button id="btn_num5" class="col-1-8">5</button>
				<button id="btn_num6" class="col-1-8">6</button>
				<button id="btn_mul" class="col-1-8">&times;</button>
				<button id="btn_asin" class="col-1-8">asin</button>
				<button id="btn_acos" class="col-1-8">acos</button>
				<button id="btn_atan" class="col-1-8">atan</button>
				<button id="btn_const" class="col-1-8">CONST</button>
			</div>
			<div class="row">
				<button id="btn_num1" class="col-1-8">1</button>
				<button id="btn_num2" class="col-1-8">2</button>
				<button id="btn_num3" class="col-1-8">3</button>
				<button id="btn_sub" class="col-1-8">-</button>
				<button id="btn_square" class="col-1-8">x<sup>2</sup></button>
				<button id="btn_sqrt" class="col-1-8">&radic;x</button>
				<button id="btn_pow" class="col-1-8">x<sup>n</sup></button>
				<button id="btn_log10" class="col-1-8">log10</button>
			</div>
			<div class="row">
				<button id="btn_point" class="col-1-8">.</button>
				<button id="btn_num0" class="col-1-8">0</button>
				<button id="btn_equals" class="col-1-8">=</button>
				<button id="btn_add" class="col-1-8">+</button>
				<button id="btn_lbra" class="col-1-8">(</button>
				<button id="btn_rbra" class="col-1-8">)</button>
				<button id="btn_exp" class="col-1-8">e<sup>x</sup></button>
				<button id="btn_ln" class="col-1-8">ln</button>
			</div>
		</div>
	</div>

	<script type="text/javascript">
	function $(expr) {
		var res = document.querySelectorAll(expr);
		if(res.length == 1) return res[0];
		return res;
	}

	var txt_expr = $("#expression"),
		lbl_res = $("#result");

	function evaluate_expression() {
		var expr = txt_expr.value;
		var res = 0;
		try {
			with(Math) {
				res = eval(expr);
				lbl_res.innerHTML = res;
			}
		}
		catch(e) {
			lbl_res.innerHTML = "Syntax Error!";
		}
	}


	var btns = $("button");

	for(var b in btns) {
		btns[b].addEventListener("click", function(e) {
			var str = "";

			switch(this.innerHTML) {
				case "DEL":
					txt_expr.value = txt_expr.substr(0, txt_expr.length-1);
					return;

				case "CONST":
					// YET TO BE IMPLEMENTED!
					return;

				case "=":
					evaluate_expression();
					return;

				case "sin":
				case "cos":
				case "tan":
				case "asin":
				case "acos":
				case "atan":
				case "log10":
				case "ln":
					str = this.innerHTML + "(";
					break;

				case "\u221Ax":
					str = "sqrt(";
					break;

				case "x<sup>2</sup>":
					str = "^2";
					break;

				case "e<sup>x</sup>":
					str = "exp(";
						break;

				case "\u00F7":
					str = "/";
					break;

				case "\u00D7":
					str = "*";
					break;

				default:
					str = this.innerHTML;
			}
			
			txt_expr.value += str;
			return true;
		}, false);
	}
	</script>
</body>
</html>